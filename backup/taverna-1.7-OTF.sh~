#!/bin/bash
ENGINE_NAME=taverna-1.7.2-Engine
echo "Looking for workflow engine files"
if [ ! -f $ENGINE_NAME".tgz" ]; then
	echo
	echo "Workflow engine not found"
	exit 1
fi

tar xzfv $ENGINE_NAME.tgz
if [ "$?" != "0"]; then
	echo
	echo "Error detected during extraction of the workflow engine"
	exit 2
fi

echo "Taverna 1.7 pre-installed workflow engine ver (10)"
echo "Running on: "`hostname -f`
echo "Execution by: "`id`
echo "Executed command: ./$0 $*"
export ENGINE_REPO=`pwd`
echo running $ENGINE_REPO/auto-deploy-taverna/taverna-1.7.2/wfsubmit.sh $*
$ENGINE_REPO/auto-deploy-taverna/taverna-1.7.2/wfsubmit.sh $*
echo "Execution finished"
exit
